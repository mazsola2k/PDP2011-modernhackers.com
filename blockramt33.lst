       1                                         .title test33
       2 000000 000167  000774                   jmp st
       3                                ;         .word 0   ;                    0
       4                                ;         .word 0   ;                    2
       5 000004 000000                           .word 0   ;                    4
       6 000006 000000                           .word 0   ;                    6
       7 000010 000000                           .word 0   ;                   10
       8 000012 000000                           .word 0   ;                   12
       9 000014 000000                           .word 0   ;                   14
      10 000016 000000                           .word 0   ;                   16
      11 000020 000000                           .word 0   ;                   20
      12 000022 000000                           .word 0   ;                   22
      13 000024 000000                           .word 0   ;                   24
      14 000026 000000                           .word 0   ;                   26
      15 000030 000000                           .word 0   ;                   30
      16 000032 000000                           .word 0   ;                   32
      17 000034 000000                           .word 0   ;                   34
      18 000036 000000                           .word 0   ;                   36
      19 000040 000000                           .word 0   ;                   40
      20 000042 000000                           .word 0   ;                   42
      21 000044 000000                           .word 0   ;                   44
      22 000046 000000                           .word 0   ;                   46
      23 000050 000000                           .word 0   ;                   50
      24 000052 000000                           .word 0   ;                   52
      25 000054 000000                           .word 0   ;                   54
      26 000056 000000                           .word 0   ;                   56
      27 000060 000000                           .word 0   ;                   60
      28 000062 000000                           .word 0   ;                   62
      29 000064 000000                           .word 0   ;                   64
      30 000066 000000                           .word 0   ;                   66
      31 000070 000000                           .word 0   ;                   70
      32 000072 000000                           .word 0   ;                   72
      33 000074 000000                           .word 0   ;                   74
      34 000076 000000                           .word 0   ;                   76
      35 000100 000000                           .word 0   ;                  100
      36 000102 000000                           .word 0   ;                  102
      37 000104 000000                           .word 0   ;                  104
      38 000106 000000                           .word 0   ;                  106
      39 000110 000000                           .word 0   ;                  110
      40 000112 000000                           .word 0   ;                  112
      41 000114 000000                           .word 0   ;                  114
      42 000116 000000                           .word 0   ;                  116
      43 000120 000000                           .word 0   ;                  120
      44 000122 000000                           .word 0   ;                  122
      45 000124 000000                           .word 0   ;                  124
      46 000126 000000                           .word 0   ;                  126
      47 000130 000000                           .word 0   ;                  130
      48 000132 000000                           .word 0   ;                  132
      49 000134 000000                           .word 0   ;                  134
      50 000136 000000                           .word 0   ;                  136
      51 000140 000000                           .word 0   ;                  140
      52 000142 000000                           .word 0   ;                  142
      53 000144 000000                           .word 0   ;                  144
      54 000146 000000                           .word 0   ;                  146
      55 000150 000000                           .word 0   ;                  150
      56 000152 000000                           .word 0   ;                  152
      57 000154 000000                           .word 0   ;                  154
      58 000156 000000                           .word 0   ;                  156
      59 000160 000000                           .word 0   ;                  160
      60 000162 000000                           .word 0   ;                  162
      61 000164 000000                           .word 0   ;                  164
      62 000166 000000                           .word 0   ;                  166
      63 000170 000000                           .word 0   ;                  170
      64 000172 000000                           .word 0   ;                  172
      65 000174 000000                           .word 0   ;                  174
      66 000176 000000                           .word 0   ;                  176
      67 000200 000000                           .word 0   ;                  200
      68 000202 000000                           .word 0   ;                  202
      69 000204 000000                           .word 0   ;                  204
      70 000206 000000                           .word 0   ;                  206
      71 000210 000000                           .word 0   ;                  210
      72 000212 000000                           .word 0   ;                  212
      73 000214 000000                           .word 0   ;                  214
      74 000216 000000                           .word 0   ;                  216
      75 000220 000000                           .word 0   ;                  220
      76 000222 000000                           .word 0   ;                  222
      77 000224 000000                           .word 0   ;                  224
      78 000226 000000                           .word 0   ;                  226
      79 000230 000000                           .word 0   ;                  230
      80 000232 000000                           .word 0   ;                  232
      81 000234 000000                           .word 0   ;                  234
      82 000236 000000                           .word 0   ;                  236
      83 000240 000000                           .word 0   ;                  240
      84 000242 000000                           .word 0   ;                  242
      85 000244 000000                           .word 0   ;                  244
      86 000246 000000                           .word 0   ;                  246
      87 000250 000000                           .word 0   ;                  250
      88 000252 000000                           .word 0   ;                  252
      89 000254 000000                           .word 0   ;                  254
      90 000256 000000                           .word 0   ;                  256
      91 000260 000000                           .word 0   ;                  260
      92 000262 000000                           .word 0   ;                  262
      93 000264 000000                           .word 0   ;                  264
      94 000266 000000                           .word 0   ;                  266
      95 000270 000000                           .word 0   ;                  270
      96 000272 000000                           .word 0   ;                  272
      97 000274 000000                           .word 0   ;                  274
      98 000276 000000                           .word 0   ;                  276
      99 000300 000000                           .word 0   ;                  300
     100 000302 000000                           .word 0   ;                  302
     101 000304 000000                           .word 0   ;                  304
     102 000306 000000                           .word 0   ;                  306
     103 000310 000000                           .word 0   ;                  310
     104 000312 000000                           .word 0   ;                  312
     105 000314 000000                           .word 0   ;                  314
     106 000316 000000                           .word 0   ;                  316
     107 000320 000000                           .word 0   ;                  320
     108 000322 000000                           .word 0   ;                  322
     109 000324 000000                           .word 0   ;                  324
     110 000326 000000                           .word 0   ;                  326
     111 000330 000000                           .word 0   ;                  330
     112 000332 000000                           .word 0   ;                  332
     113 000334 000000                           .word 0   ;                  334
     114 000336 000000                           .word 0   ;                  336
     115 000340 000000                           .word 0   ;                  340
     116 000342 000000                           .word 0   ;                  342
     117 000344 000000                           .word 0   ;                  344
     118 000346 000000                           .word 0   ;                  346
     119 000350 000000                           .word 0   ;                  350
     120 000352 000000                           .word 0   ;                  352
     121 000354 000000                           .word 0   ;                  354
     122 000356 000000                           .word 0   ;                  356
     123 000360 000000                           .word 0   ;                  360
     124 000362 000000                           .word 0   ;                  362
     125 000364 000000                           .word 0   ;                  364
     126 000366 000000                           .word 0   ;                  366
     127 000370 000000                           .word 0   ;                  370
     128 000372 000000                           .word 0   ;                  372
     129 000374 000000                           .word 0   ;                  374
     130 000376 000000                           .word 0   ;                  376
     131 000400 000000                           .word 0   ;                  400
     132 000402 000000                           .word 0   ;                  402
     133 000404 000000                           .word 0   ;                  404
     134 000406 000000                           .word 0   ;                  406
     135 000410 000000                           .word 0   ;                  410
     136 000412 000000                           .word 0   ;                  412
     137 000414 000000                           .word 0   ;                  414
     138 000416 000000                           .word 0   ;                  416
     139 000420 000000                           .word 0   ;                  420
     140 000422 000000                           .word 0   ;                  422
     141 000424 000000                           .word 0   ;                  424
     142 000426 000000                           .word 0   ;                  426
     143 000430 000000                           .word 0   ;                  430
     144 000432 000000                           .word 0   ;                  432
     145 000434 000000                           .word 0   ;                  434
     146 000436 000000                           .word 0   ;                  436
     147 000440 000000                           .word 0   ;                  440
     148 000442 000000                           .word 0   ;                  442
     149 000444 000000                           .word 0   ;                  444
     150 000446 000000                           .word 0   ;                  446
     151 000450 000000                           .word 0   ;                  450
     152 000452 000000                           .word 0   ;                  452
     153 000454 000000                           .word 0   ;                  454
     154 000456 000000                           .word 0   ;                  456
     155 000460 000000                           .word 0   ;                  460
     156 000462 000000                           .word 0   ;                  462
     157 000464 000000                           .word 0   ;                  464
     158 000466 000000                           .word 0   ;                  466
     159 000470 000000                           .word 0   ;                  470
     160 000472 000000                           .word 0   ;                  472
     161 000474 000000                           .word 0   ;                  474
     162 000476 000000                           .word 0   ;                  476
     163                                stbot:
     164                                stk:
     165 000500 000000                           .word 0   ;                  500
     166 000502 000000                           .word 0   ;                  502
     167 000504 000000                           .word 0   ;                  504
     168 000506 000000                           .word 0   ;                  506
     169 000510 000000                           .word 0   ;                  510
     170 000512 000000                           .word 0   ;                  512
     171 000514 000000                           .word 0   ;                  514
     172 000516 000000                           .word 0   ;                  516
     173 000520 000000                           .word 0   ;                  520
     174 000522 000000                           .word 0   ;                  522
     175 000524 000000                           .word 0   ;                  524
     176 000526 000000                           .word 0   ;                  526
     177 000530 000000                           .word 0   ;                  530
     178 000532 000000                           .word 0   ;                  532
     179 000534 000000                           .word 0   ;                  534
     180 000536 000000                           .word 0   ;                  536
     181 000540 000000                           .word 0   ;                  540
     182 000542 000000                           .word 0   ;                  542
     183 000544 000000                           .word 0   ;                  544
     184 000546 000000                           .word 0   ;                  546
     185 000550 000000                           .word 0   ;                  550
     186 000552 000000                           .word 0   ;                  552
     187 000554 000000                           .word 0   ;                  554
     188 000556 000000                           .word 0   ;                  556
     189 000560 000000                           .word 0   ;                  560
     190 000562 000000                           .word 0   ;                  562
     191 000564 000000                           .word 0   ;                  564
     192 000566 000000                           .word 0   ;                  566
     193 000570 000000                           .word 0   ;                  570
     194 000572 000000                           .word 0   ;                  572
     195 000574 000000                           .word 0   ;                  574
     196 000576 000000                           .word 0   ;                  576
     197 000600 000000                           .word 0   ;                  600
     198 000602 000000                           .word 0   ;                  602
     199 000604 000000                           .word 0   ;                  604
     200 000606 000000                           .word 0   ;                  606
     201 000610 000000                           .word 0   ;                  610
     202 000612 000000                           .word 0   ;                  612
     203 000614 000000                           .word 0   ;                  614
     204 000616 000000                           .word 0   ;                  616
     205 000620 000000                           .word 0   ;                  620
     206 000622 000000                           .word 0   ;                  622
     207 000624 000000                           .word 0   ;                  624
     208 000626 000000                           .word 0   ;                  626
     209 000630 000000                           .word 0   ;                  630
     210 000632 000000                           .word 0   ;                  632
     211 000634 000000                           .word 0   ;                  634
     212 000636 000000                           .word 0   ;                  636
     213 000640 000000                           .word 0   ;                  640
     214 000642 000000                           .word 0   ;                  642
     215 000644 000000                           .word 0   ;                  644
     216 000646 000000                           .word 0   ;                  646
     217 000650 000000                           .word 0   ;                  650
     218 000652 000000                           .word 0   ;                  652
     219 000654 000000                           .word 0   ;                  654
     220 000656 000000                           .word 0   ;                  656
     221 000660 000000                           .word 0   ;                  660
     222 000662 000000                           .word 0   ;                  662
     223 000664 000000                           .word 0   ;                  664
     224 000666 000000                           .word 0   ;                  666
     225 000670 000000                           .word 0   ;                  670
     226 000672 000000                           .word 0   ;                  672
     227 000674 000000                           .word 0   ;                  674
     228 000676 000000                           .word 0   ;                  676
     229 000700 000000                           .word 0   ;                  700
     230 000702 000000                           .word 0   ;                  702
     231 000704 000000                           .word 0   ;                  704
     232 000706 000000                           .word 0   ;                  706
     233 000710 000000                           .word 0   ;                  710
     234 000712 000000                           .word 0   ;                  712
     235 000714 000000                           .word 0   ;                  714
     236 000716 000000                           .word 0   ;                  716
     237 000720 000000                           .word 0   ;                  720
     238 000722 000000                           .word 0   ;                  722
     239 000724 000000                           .word 0   ;                  724
     240 000726 000000                           .word 0   ;                  726
     241 000730 000000                           .word 0   ;                  730
     242 000732 000000                           .word 0   ;                  732
     243 000734 000000                           .word 0   ;                  734
     244 000736 000000                           .word 0   ;                  736
     245 000740 000000                           .word 0   ;                  740
     246 000742 000000                           .word 0   ;                  742
     247 000744 000000                           .word 0   ;                  744
     248 000746 000000                           .word 0   ;                  746
     249 000750 000000                           .word 0   ;                  750
     250 000752 000000                           .word 0   ;                  752
     251 000754 000000                           .word 0   ;                  754
     252 000756 000000                           .word 0   ;                  756
     253 000760 000000                           .word 0   ;                  760
     254 000762 000000                           .word 0   ;                  762
     255 000764 000000                           .word 0   ;                  764
     256 000766 000000                           .word 0   ;                  766
     257 000770 000000                           .word 0   ;                  770
     258 000772 000000                           .word 0   ;                  772
     259 000774 000000                           .word 0   ;                  774
     260 000776 000000                           .word 0   ;                  776
     261                                ;
     262                                ; general purpose register definitions
     263                                ;
     264 000000                         r0       = %0
     265 000001                         r1       = %1
     266 000002                         r2       = %2
     267 000003                         r3       = %3
     268 000004                         r4       = %4
     269 000005                         r5       = %5
     270 000006                         r6       = %6
     271 000007                         r7       = %7
     272 000006                         sp       = %6
     273 000007                         pc       = %7
     274 000000                         ac0      = %0
     275 000001                         ac1      = %1
     276 000002                         ac2      = %2
     277 000003                         ac3      = %3
     278 000004                         ac4      = %4
     279 000005                         ac5      = %5
     280                                ;
     281                                ; error macro - provide unique error number
     282                                ;
     283 000000                         ..n      = 0
     284                                         .macro error
     285                                ..n      = ..n + 1
     286                                         mov #..n,@#ddisp
     287                                         halt
     288                                         .endm error
     289                                ;
     290                                ; start of test
     291                                ;
     292                                st:
     293                                tst26x:
     294 001000 012706  001000                   mov #1000,r6
     295 001004 012737  002040  000250           mov #mmutrp,@#250
     296 001012 005037  177572                   clr @#177572
     297 001016 004767  000650                   jsr pc,mmu
     298 001022 012737  077400  172200           mov #77400,@#172200
     299 001030 012737  000037  172516           mov #37,@#172516
     300 001036 012737  000000  177776           mov #0,@#177776
     301 001044 010601                           mov r6,r1
     302 001046 012737  140000  177776           mov #140000,@#177776
     303 001054 010106                           mov r1,r6
     304 001056 012737  000001  177572           mov #1,@#177572
     305 001064 007014                           .word 7014
     306 001066 000000                           halt
     307                                
     308                                tstm16:
     309 001070 012706  001000                   mov #1000,r6
     310 001074 012737  002040  000250           mov #mmutrp,@#250
     311 001102 005037  177572                   clr @#177572
     312 001106 005067  001066                   clr flag
     313 001112 005067  001050                   clr savmr0
     314 001116 005067  001046                   clr savmr1
     315 001122 005067  001044                   clr savmr2
     316 001126 004767  000540                   jsr pc,mmu
     317 001132 005037  177776                   clr @#177776
     318 001136 012702  020200                   mov #20200,r2
     319 001142 012737  077400  172302           mov #77400,@#172302
     320 001150 012767  000001  001022           mov #1,flag
     321 001156 012737  000001  177572           mov #1,@#177572
     322 001164 010701                           mov r7,r1
     323 001166 006522                           mfpi (r2)+
     324 001170 012704  100003                   mov #100003,r4
     325 001174 004767  000210                   jsr pc,ts10
     326                                
     327 001200 012737  030000  177776           mov #30000,@#177776
     328 001206 004767  000460                   jsr pc,mmu
     329 001212 012737  077400  177636           mov #77400,@#177636
     330 001220 012737  001600  177676           mov #1600,@#177676
     331 001226 012702  160000                   mov #160000,r2
     332 001232 012767  000001  000740           mov #1,flag
     333 001240 012737  000001  177572           mov #1,@#177572
     334 001246 010701                           mov r7,r1
     335 001250 106522                           mfpd (r2)+
     336 001252 012704  100177                   mov #100177,r4
     337 001256 004767  000126                   jsr pc,ts10
     338                                
     339 001262 012737  010000  177776           mov #10000,@#177776
     340 001270 004767  000376                   jsr pc,mmu
     341 001274 012737  077400  172212           mov #77400,@#172212
     342 001302 012702  120000                   mov #120000,r2
     343 001306 012767  000001  000664           mov #1,flag
     344 001314 012737  000001  177572           mov #1,@#177572
     345 001322 010701                           mov r7,r1
     346 001324 006522                           mfpi (r2)+
     347 001326 012704  100053                   mov #100053,r4
     348 001332 004767  000052                   jsr pc,ts10
     349 001336 012737  020000  177776           mov #20000,@#177776
     350 001344 004767  000322                   jsr pc,mmu
     351 001350 012702  040000                   mov #40000,r2
     352 001354 012767  000001  000616           mov #1,flag
     353 001362 012737  000001  177572           mov #1,@#177572
     354 001370 010701                           mov r7,r1
     355 001372 106522                           mfpd (r2)+
     356 001374 012704  100105                   mov #100105,r4
     357 001400 004767  000004                   jsr pc,ts10
     358 001404 000167  000112                   jmp t10fin
     359                                ;
     360                                ts10:
     361 001410 022767  000000  000562           cmp #0,flag
     362 001416 001404                           beq 1$
     363                                         error
       1 000001                         ..n      = ..n + 1
       2 001420 012737  000001  002202           mov #..n,@#ddisp
       3 001426 000000                           halt
     364                                1$:
     365 001430 020467  000532                   cmp r4,savmr0
     366 001434 001404                           beq 2$
     367                                         error
       1 000002                         ..n      = ..n + 1
       2 001436 012737  000002  002202           mov #..n,@#ddisp
       3 001444 000000                           halt
     368                                2$:
     369 001446 022767  000022  000514           cmp #22,savmr1
     370 001454 001404                           beq 3$
     371                                         error
       1 000003                         ..n      = ..n + 1
       2 001456 012737  000003  002202           mov #..n,@#ddisp
       3 001464 000000                           halt
     372                                3$:
     373 001466 020167  000500                   cmp r1,savmr2
     374 001472 001404                           beq 4$
     375                                         error
       1 000004                         ..n      = ..n + 1
       2 001474 012737  000004  002202           mov #..n,@#ddisp
       3 001502 000000                           halt
     376                                4$:
     377 001504 005067  000456                   clr savmr0
     378 001510 005067  000454                   clr savmr1
     379 001514 005067  000452                   clr savmr2
     380 001520 000207                           rts pc
     381                                ;
     382                                t10fin:
     383                                
     384                                t33:
     385 001522 012737  177600  172356           mov #177600,@#172356
     386 001530 012737  077406  172316           mov #77406,@#172316
     387 001536 012737  177600  177656           mov #177600,@#177656
     388 001544 012737  077406  177616           mov #77406,@#177616
     389 001552 012737  077406  172300           mov #77406,@#172300
     390 001560 012737  077406  177600           mov #77406,@#177600
     391 001566 012737  077406  172310           mov #77406,@#172310
     392 001574 012702  125252                   mov #125252,r2
     393 001600 012705  117776                   mov #117776,r5
     394                                ;
     395 001604 012737  170000  172350           mov #170000,@#172350
     396 001612 012737  000020  172516           mov #20,@#172516        ; 22
     397                                
     398 001620 013737  001652  000250           mov @#t44,@#250
     399 001626 012706  140000                   mov #140000,r6
     400 001632 012737  000001  177572           mov #1,@#177572
     401 001640 012737  020000  177776           mov #20000,@#177776
     402 001646 106522                           mfpd (r2)+
     403 001650 010246                           mov r2,-(r6)
     404 001652 013700  177572          t44:     mov @#177572,r0
     405 001656 013701  177574                   mov @#177574,r1
     406                                
     407 001662 012737  000001  177572           mov #1,@#177572         ; mmu on
     408 001670 000000                           halt
     409                                ;
     410                                ;
     411                                ;
     412                                mmu:
     413 001672 010046                           mov r0,-(sp)
     414 001674 010146                           mov r1,-(sp)
     415 001676 010246                           mov r2,-(sp)
     416 001700 012700  177600                   mov #177600,r0
     417 001704 004767  000062                   jsr pc,pdr
     418 001710 004767  000100                   jsr pc,par
     419 001714 004767  000074                   jsr pc,par
     420 001720 012700  172200                   mov #172200,r0
     421 001724 004767  000042                   jsr pc,pdr
     422 001730 004767  000060                   jsr pc,par
     423 001734 004767  000054                   jsr pc,par
     424 001740 004767  000026                   jsr pc,pdr
     425 001744 004767  000044                   jsr pc,par
     426 001750 004767  000040                   jsr pc,par
     427 001754 012737  000027  172516           mov #27,@#172516
     428 001762 012602                           mov (sp)+,r2
     429 001764 012601                           mov (sp)+,r1
     430 001766 012600                           mov (sp)+,r0
     431 001770 000207                           rts pc
     432                                ;
     433                                ;
     434                                ;
     435                                pdr:
     436 001772 005002                           clr r2
     437                                pdr1:
     438 001774 012720  077406                   mov #77406,(r0)+
     439 002000 062702  000001                   add #1,r2
     440 002004 022702  000020                   cmp #16.,r2
     441 002010 001371                           bne pdr1
     442 002012 000207                           rts pc
     443                                ;
     444                                ;
     445                                ;
     446                                par:
     447 002014 005001                           clr r1
     448                                par1:
     449 002016 010120                           mov r1,(r0)+
     450 002020 062701  000200                   add #200,r1
     451 002024 022701  001600                   cmp #1600,r1
     452 002030 001372                           bne par1
     453 002032 012720  177600                   mov #177600,(r0)+
     454 002036 000207                           rts pc
     455                                ;
     456                                ;
     457                                ;
     458                                mmutrp:
     459 002040 026727  000134  000001           cmp flag,#1
     460 002046 001404                           beq 1$
     461                                         error
       1 000005                         ..n      = ..n + 1
       2 002050 012737  000005  002202           mov #..n,@#ddisp
       3 002056 000000                           halt
     462                                1$:
     463 002060 010046                           mov r0,-(sp)
     464 002062 013700  177776                   mov @#177776,r0
     465 002066 072027  177764                   ash #-14,r0
     466 002072 020027  000002                   cmp r0,#2
     467 002076 001001                           bne ok
     468 002100 000411                           br notok
     469                                ok:
     470 002102 013700  177776                   mov @#177776,r0
     471 002106 072027  000002                   ash #2,r0
     472 002112 072027  177764                   ash #-14,r0
     473 002116 020027  000002                   cmp r0,#2
     474 002122 001002                           bne ok1
     475                                notok:
     476 002124 005066  000004                   clr 4(sp)
     477                                ok1:
     478 002130 013767  177572  000030           mov @#177572,savmr0
     479 002136 013767  177574  000024           mov @#177574,savmr1
     480 002144 013767  177576  000020           mov @#177576,savmr2
     481 002152 005037  177572                   clr @#177572
     482 002156 005067  000016                   clr flag
     483 002162 012600                           mov (sp)+,r0
     484 002164 000002                           rti
     485                                ;
     486                                ; czkdkb0 data
     487                                ;
     488 002166 000000                  savmr0:  .word 0
     489 002170 000000                  savmr1:  .word 0
     490 002172 000000                  savmr2:  .word 0
     491 002174 000000                  savuse:  .word 0
     492 002176 000000                  savsup:  .word 0
     493 002200 000000                  flag:    .word 0
     494 002202 000000                  ddisp:   .word 0
     495                                         .even
     496                                
     497 002204 000000  000000  000000           .word 0,0,0,0,0,0,0,0,0
         002212 000000  000000  000000  
         002220 000000  000000  000000  
     498 002226    132     132     132  tothier: .ascii /ZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZZ/
         002231    132     132     132  
         002234    132     132     132  
         002237    132     132     132  
         002242    132     132     132  
         002245    132     132     132  
         002250    132     132     132  
         002253    132     132     132  
         002256    132     132     132  
         002261    132     132     132  
         002264    132     132     132  
         002267    132     132     132  
         002272    132     132     132  
         002275    132     132     132  
         002300    132     132     132  
         002303    132                  
     498                                
